# nico-cal ユースケース記述

このドキュメントでは、nico-calの主要ユースケースを詳細に記述します。

## 1. ユーザー認証関連

### 1.1 ログイン

**アクター**: ユーザー

**概要**: ユーザーはシステムにログインしてサービスを利用します。

**前提条件**: ユーザーがアカウントを持っている。

**主フロー**:
1. ユーザーはログイン画面にアクセスする
2. ユーザーIDとパスワードを入力する
3. システムは認証情報を検証する
4. 認証成功後、ユーザーはカレンダー画面（ホーム）にリダイレクトされる

**代替フロー**:
- 3a. 認証情報が無効な場合、エラーメッセージを表示し、ログイン画面に留まる

### 1.2 ログアウト

**アクター**: ユーザー

**概要**: ユーザーはシステムからログアウトします。

**前提条件**: ユーザーがログイン状態である。

**主フロー**:
1. ユーザーはヘッダーのログアウトボタンをクリックする
2. システムはユーザーのセッションを終了する
3. ユーザーはログイン画面にリダイレクトされる

### 1.3 新規登録

**アクター**: ユーザー

**概要**: 新しいユーザーがアカウントを作成してサービスを利用できるようになります。

**前提条件**: ユーザーがアカウントを持っていない。

**主フロー**:
1. ユーザーは新規登録画面にアクセスする
2. ユーザーは必要な情報（ユーザーID、パスワード）を入力する
3. システムは入力された情報の有効性を検証する
4. システムは新しいユーザーアカウントを作成する
5. 登録成功後、ユーザーはログイン画面または直接カレンダー画面（ホーム）にリダイレクトされる

**代替フロー**:
- 3a. 入力された情報が有効でない場合（例：既存のユーザーIDとの重複）、エラーメッセージを表示し、新規登録画面に留まる
- 3b. パスワードが要件を満たさない場合（8文字以上、英数字混在）、エラーメッセージを表示する

### 1.4 退会

**アクター**: ユーザー

**概要**: ユーザーがサービスからアカウントを削除します。

**前提条件**: ユーザーがログイン状態である。

**主フロー**:
1. ユーザーはアカウント設定ページにアクセスする
2. ユーザーは退会ボタンをクリックする
3. システムは確認ダイアログを表示する
4. ユーザーは退会を確認する
5. システムはユーザーアカウントとそれに関連するすべてのデータ（日記など）を削除する
6. ユーザーはログイン画面にリダイレクトされる

**代替フロー**:
- 4a. ユーザーが退会をキャンセルした場合、アカウント設定ページに留まる
- 5a. データ削除処理中にエラーが発生した場合、エラーメッセージを表示し、管理者に通知する

## 2. カレンダー機能関連

### 2.1 カレンダー表示

**アクター**: ユーザー

**概要**: ユーザーは月別カレンダーで日記の概要を確認します。

**前提条件**: ユーザーがログイン状態である。

**主フロー**:
1. ユーザーはホーム画面でカレンダーを閲覧する
2. システムは選択された月の日記エントリーを日付ごとに表示する
3. 各日付には、記録された感情状態（良い/普通/悪い）が色やアイコンで表示される

**代替フロー**:
- 2a. 表示月を変更する場合、月の切り替えボタンをクリックする

## 3. 日記機能関連

### 3.1 日記作成

**アクター**: ユーザー

**概要**: ユーザーは新しい日記エントリーを作成します。

**前提条件**: ユーザーがログイン状態である。

**主フロー**:
1. ユーザーはカレンダーから日付を選択するか、新規日記作成ボタンをクリックする
2. システムは日記作成画面を表示する
3. ユーザーは感情状態（良い/普通/悪い）を選択する
4. ユーザーは日記の内容を入力する
5. ユーザーは保存ボタンをクリックする
6. システムは日記を保存し、カレンダー画面または日記詳細画面にリダイレクトする

**代替フロー**:
- 5a. 入力内容に問題がある場合、エラーメッセージを表示し、編集を続ける

### 3.2 日記編集

**アクター**: ユーザー

**概要**: ユーザーは既存の日記エントリーを編集します。

**前提条件**: ユーザーがログイン状態であり、編集対象の日記が存在する。

**主フロー**:
1. ユーザーはカレンダーから日付を選択し、既存の日記詳細画面を表示する
2. ユーザーは編集ボタンをクリックする
3. システムは日記編集画面を表示し、既存の内容をフォームに表示する
4. ユーザーは感情状態や日記の内容を編集する
5. ユーザーは更新ボタンをクリックする
6. システムは日記を更新し、日記詳細画面にリダイレクトする

### 3.3 日記閲覧

**アクター**: ユーザー

**概要**: ユーザーは特定の日の日記詳細を閲覧します。

**前提条件**: ユーザーがログイン状態であり、閲覧対象の日記が存在する。

**主フロー**:
1. ユーザーはカレンダーから日付を選択する
2. システムは選択された日付の日記詳細を表示する
3. ユーザーは感情状態と日記の内容を閲覧する

**代替フロー**:
- 2a. 選択された日付に日記が存在しない場合、その日の新規日記作成画面を表示する

## 4. 感情記録機能

### 4.1 感情状態記録

**アクター**: ユーザー

**概要**: ユーザーは日々の感情状態を記録します。

**前提条件**: ユーザーがログイン状態であり、日記作成または編集画面にいる。

**主フロー**:
1. ユーザーは日記作成/編集画面で、感情状態（良い/普通/悪い）を選択する
2. システムは選択された感情状態を記録する

## 5. 統計・分析機能（将来拡張）

### 5.1 月別統計確認

**アクター**: ユーザー

**概要**: ユーザーは月ごとの感情状態の統計を確認します。

**前提条件**: ユーザーがログイン状態であり、記録された日記がある。

**主フロー**:
1. ユーザーは統計ボタンをクリックする
2. システムは選択された月の感情状態の分布をグラフで表示する
3. ユーザーは良い/普通/悪いの日数や割合を確認できる

## 6. アカウント管理

### 6.1 アカウント設定管理

**アクター**: ユーザー

**概要**: ユーザーは自身のアカウント設定を管理します。

**前提条件**: ユーザーがログイン状態である。

**主フロー**:
1. ユーザーはアカウント設定ページにアクセスする
2. システムは現在の設定を表示する
3. ユーザーはパスワード変更などの設定を更新する
4. システムは変更を保存する

## 7. 検索機能（将来拡張）

### 7.1 日記検索

**アクター**: ユーザー

**概要**: ユーザーは過去の日記をキーワードや日付範囲で検索します。

**前提条件**: ユーザーがログイン状態である。

**主フロー**:
1. ユーザーは検索バーにキーワードを入力する、または日付範囲を指定する
2. システムは検索条件に合致する日記エントリーの一覧を表示する
3. ユーザーは検索結果から日記を選択して詳細を閲覧できる
